
## 1. Въведение

Catmull-Rom сплайновете са интерполационни криви, които преминават през даден набор от точки. Те се използват широко за изглаждане на траектории в графични приложения.

Даден е набор от точки $P_0,P_1,P_2, .. ,P_n$, където $n >=4$, и целта е да се конструира плавна крива, която минава през тях.

## 2.  Aлгоритъм за построяване на Catmull-Rom сплайн

Точките се разделят на групи от по четири последователни точки: $P_{i-1}$, $P_i$, $P_{i+1}$, $P_{i+2}$.
Кривата трябва да минава през $P_i$ и $P_{i+1}$, като осигурява плавни преходи между сегментите.

### Изчисляване на допирателните вектори

За да определим формата на кривата, изчисляваме тангентните вектори в точките $P_i$ и $P_{i+1}$:

$$
T_1 = (P_{i+1} - P_{i-1}) / 2
$$
$$
T_2 = (P_{i+2} - P_{i}) / 2
$$

Тези вектори представляват приближена първа производна на кривата в съответните точки.


### Построяване на гладък сегмент чрез алгоритъма на de Casteljau

Прилагаме алгоритъма на de Casteljau, за да построим кубичен Безиеров сегмент с контролни точки:

$B_0 = P_0$       
$B_1 = P_i+T_1/3$     
$B_2 = P_{i+1} - T_2/3$     
$B_3 = P_{i+1}$

#### Стъпка 1

$B_0^1​=(1−t)B_0​+tB_1​$
$B_1^1​=(1−t)B_1​+tB_2​$
$B_2^1​=(1−t)B_2​+tB_3​$

#### Стъпка 2

$B_0^2​=(1−t)B_0^1​+tB_1^1​$
$B_1^2​=(1−t)B_1^1​+tB_2^1​$

#### Стъпка 3 (последна)

$B_0^3​=(1−t)B_0^2​+tB_1^2​$

Намерената точка  $B_0^3​$  лежи върху търсената крива.

## 3. Генериране на кривата

Чрез промяна на параметъра $t$ в диапазона $[0,1]$, се генерира един сегмент от сплайна. Процесът се повтаря за следващия сегмент, използвайки следващите четири точки, до изчерпване на всички точки.

Този метод гарантира **гладка и непрекъсната интерполация**, което го прави подходящ за **анимации, генериране на траектории и разработка на игри**.
